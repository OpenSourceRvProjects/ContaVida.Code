<div class="container py-3">

  <!-- Header Row -->
  <div class="d-flex align-items-center justify-content-between mb-4">
    <h3 class="fw-bold mb-0">
      Tus contadores  <i class="fa fa-clock-o" aria-hidden="true"></i>
    </h3>

    <button type="button"
            (click)="router.navigate(['/counter/add'])"
            class="btn btn-success shadow-sm px-3">
      <i class="fa fa-plus me-2"></i> Agregar nuevo
    </button>
  </div>

  <div *ngIf="!processing">
    <!-- Search Bar -->
    <div class="input-group shadow-sm mb-4 rounded">
      <span class="input-group-text bg-white border-end-0">
        <i class="fa fa-search text-muted"></i>
      </span>
      <input class="form-control border-start-0"
             type="text"
             [ngModel]="searchText"
             (ngModelChange)="searchKey($event)"
             name="search"
             autocomplete="off"
             placeholder="Buscar evento...">
    </div>

    <!-- Table -->
    <div class="table-responsive shadow-sm rounded bg-white">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Evento</th>
            <th>Fecha</th>
            <th class="text-center">Público</th>
            <th class="text-center">Editar</th>
            <th class="text-center">Estadísticas</th>
            <th class="text-center">Eliminar</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let e of filteredCounterList; index as i">

            <td>
              <a href="counter/myCounter?id={{e.id}}"
                 class="text-decoration-none fw-semibold">
                {{e.eventName}}
              </a>
            </td>

            <td class="text-muted">
              {{e.dateString}}
            </td>

            <td class="text-center">
              <input (change)="checkboxChange(e)"
                     [(ngModel)]="e.isPublic"
                     type="checkbox"
                     class="form-check-input">
            </td>

            <td class="text-center">
              <i class="fa fa-pencil text-primary action-icon"
                 (click)="openEditPopUp(e)"></i>
            </td>

            <td class="text-center">
              <i class="fa fa-bar-chart text-secondary action-icon"
                 (click)="openRelapsesPopUp(e)"
                 title="Recaidas/Eventos"></i>
            </td>

            <td class="text-center">
              <i class="fa fa-ban text-danger action-icon"
                 (click)="openDeletePopUp(e)"></i>
            </td>

          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div *ngIf="processing"
     class="d-flex justify-content-center align-items-center spinner-wrapper">
  <div class="spinner-border text-success" style="width: 4rem; height: 4rem;"></div>
</div>
