<header *ngIf="localStorageService.getUserData() && !localStorageService.isCounterActive()">

  <!-- TOP BAR -->
  <nav class="navbar contavida-navbar shadow-sm">
    <div class="container-fluid d-flex justify-content-between align-items-center">

      <!-- BRAND -->
      <span
        class="navbar-brand text-white fw-semibold"
        [routerLink]="['/']">
        ContaVida
      </span>

      <!-- ALWAYS VISIBLE HAMBURGER -->
      <button
        class="hamburger-btn"
        type="button"
        aria-label="Open menu"
        (click)="toggle()">
        ☰
      </button>

    </div>
  </nav>

  <!-- RIGHT SIDEBAR -->
  <aside class="sidebar" [class.open]="isExpanded">

    <div class="sidebar-header">
      <span class="sidebar-title">Menú</span>
      <button class="close-btn" (click)="toggle()">×</button>
    </div>

    <nav class="sidebar-nav">

      <!-- LINKS -->
      <a
        *ngFor="let link of links; let i = index"
        [routerLink]="link.path"
        [class.active]="selectedIndex === i"
        (click)="select(i); toggle()">
        {{ link.text }}
      </a>

      <a class="logout" (click)="logout()">
        Salir
      </a>

    </nav>
  </aside>

  <!-- BACKDROP -->
  <div
    class="sidebar-backdrop"
    *ngIf="isExpanded"
    (click)="toggle()">
  </div>

</header>

<!-- ================== STYLES ================== -->
<style>
  /* ================== TOP BAR ================== */
  .contavida-navbar {
    height: 56px;
    background: linear-gradient(
      90deg,
      rgba(2, 0, 36, 1) 0%,
      rgba(38, 95, 43, 1) 45%,
      rgba(72, 187, 50, 1) 100%
    );
  }

  .navbar-brand {
    font-size: 1.25rem;
    cursor: pointer;
  }

  .hamburger-btn {
    font-size: 1.8rem;
    background: transparent;
    border: none;
    color: #ffffff;
    cursor: pointer;
    line-height: 1;
  }

  /* ================== SIDEBAR ================== */
  .sidebar {
    position: fixed;
    top: 0;
    right: -280px;
    width: 280px;
    height: 100vh;
    background: #0f1f14;
    color: #ffffff;
    transition: right 0.25s ease-in-out;
    z-index: 1050;
    display: flex;
    flex-direction: column;
  }

  .sidebar.open {
    right: 0;
  }

  /* ================== SIDEBAR HEADER ================== */
  .sidebar-header {
    height: 56px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1rem;
    background: rgba(0, 0, 0, 0.25);
  }

  .sidebar-title {
    font-size: 1rem;
    font-weight: 600;
  }

  .close-btn {
    font-size: 1.5rem;
    background: none;
    border: none;
    color: #ffffff;
    cursor: pointer;
  }

  /* ================== NAV LINKS ================== */
  .sidebar-nav {
    display: flex;
    flex-direction: column;
    padding: 1rem;
    gap: 0.5rem;
  }

  .sidebar-nav a {
    padding: 0.6rem 0.75rem;
    border-radius: 0.4rem;
    color: rgba(255, 255, 255, 0.85);
    text-decoration: none;
    font-weight: 500;
    transition: background-color 0.2s ease, color 0.2s ease;
    cursor: pointer;
  }

  .sidebar-nav a:hover {
    background: rgba(255, 255, 255, 0.08);
    color: #ffffff;
  }

  /* ACTIVE = USER SELECTED ONLY */
  .sidebar-nav a.active {
    background: rgba(255, 255, 255, 0.18);
    color: #ffffff;
  }

  .sidebar-nav .logout {
    margin-top: 1rem;
    color: #ff6b6b;
    font-weight: 600;
  }

  /* ================== BACKDROP ================== */
  .sidebar-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.45);
    z-index: 1040;
  }
</style>
